DRIVER
  os.environ['SMA_TSO_COSMOS_ELEMAT'] = '1'
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.ste*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcd*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcm*' ], 'SAVE.ste', '' )
END_

FEM_INPUT
  ID_NAME = Bridge-Topology_Study_2_1
  FILE = Bridge-Topology Study 2.NOD
END_

*SET_DB,rint,130,1

GROUP_DEF
  ID_NAME = FROZEN_AREA_ELEMS_GRP_1
  TYPE=ELEM
  FORMAT=LIST
  LIST_BEGIN
1513,1803,2373,2449,2517,2880,3027,3341,3576,3716,4393,6643,7020,7030,7204,7551,8223,8227,
8237,8399,8597,8685,8797,8937,9069,9071,9091,9103,9105,9140,9328,9333,9359,9586,9632,9658,
9661,9709,9714,9717,9729,9742,9743,10207,10267,10268,11159,11162,11171,11259,11268,11270,11584,
11585,11586,12819,12839,12843,12850,12851,12858,12873,12879,12884,12892,12896,12905,12911,
12922,12923,12924,12926,12927,12928,12942,12948,12949,12950,12966,12967,12968,13002,13005,
13039,13060,13067,13068,13070,13290,13350,13473,13660,13674,13676,13688,13694,13695,13699,
13700,13705,13707,13710,13713,13727,13736,13737,13739,13763,13765,13770,13780,13788,13792,
13797,13806,13819,13869,13879,13910,13940,14006,14011,14015,14016,14647,15020,15060,15064,
15455,15478,15489,15549,15558,15754,16675,16678,16679,16683,16684,16686,17960,17964,17970,
17985,17988,17994,17995,18000,18003,18005,18008,18014,18036,18042,18044,18052,18053,18106,
18109,18110,18121,18264,18559,18582,18583,18586,18588,18590,18591,18594,18596,18597,18598,
18599,18609,18612,18623,18625,18629,18632,18635,18643,18646,18658,18665,18667,18674,18678,
18809,19600,19637,19895,19898,19916,20247,20805,20810,20813,20946,21806,21870,21872,21875,
21882,21898,21902,21904,21909,21920,21921,21922,21924,21929,21933,21934,21935,21939,21948,
21971,22017,22027,22030,22036,22042,22043,22299,22309,22310,22311,22315,22325,22326,22333,
22334,22342,22346,22349,22350,22352,22355,22362,22366,22367,22371,22373,22374,22380,22394,
22395,22402,22437,22438,22447,23108,23400,23401,23402,23403,23411,23414,23422,24173,24995,
24998,25000,25004,25006,25011,25015,25016,25019,25026,25031,25036,25041,25050,25051,25052,
25173,25398,25402,25411,25414,25415,25416,25419,25437,25441,25442,25446,25447,25448,25450,
25474,25476,25478,25480,25483,25484,25485,25489,25494,25498,25501,25529,25580,25587,26320,
26330,26340,26342,26344,26385,26501,27033,27044,27646,27647,27664,27665,27675,27684,27685,
27692,27694,27695,27728,27731,27923,27929,27930,27932,27941,27946,28608,28669,28671,28672,
28673,28735,28745,29870,29871,29874,29876,29878,29885,29886,29889,29891,29895,29898,29916,
29917,29958,30219,30223,30224,30225,30226,30227,30236,30238,30244,30245,30246,30265,30268,
30279,30293,30763,30893,30898,30899,30900,31513,31514,32093,32095,32103,32105,32110,32113,
32117,32419,32424,32434,32435,32438,32439,32443,32445,32449,32848,32912,32919,32920,33397,
33398,33400,33884,33885,33886,33888,33889,33893,33907,33908,33910,33925,33931,33936,33940,
33948,33949,33950,34116,34117,34120,34129,34130,34134,34135,34138,34140,34141,34503,34539,
34549,34597,34598,34601,34606,34609,35350,35353,35363,35368,35369,35378,35379,35385,35387,
35389,35393,35394,35399,35401,35403,35831,35834,35909,35910,35919,35991,36182,36274,36276,
36521,36526,36530,36534,36539,36540,36542,36550,36551,36566,36567,36569,36579,36587,36728,
36730,36732,36734,36739,36741,36744,36746,36748,36749,36763,37024,37050,37051,37055,37127,
37130,37520,37712,37713,37717,37719,37721,37724,37727,37730,37732,37873,37876,37889,37890,
37891,38609,38611,38614,38620,38622,38623,38624,38627,38679,38781,38782,38879,38881,38926,
38928,38929,38931,39344,39353,39354,39357,39361,39362,39367,39498,39506,39508,39878,40037,
40049,40050,40056,40057,40063,40065,40066,40183,40192,40195,40197,40198,40202,40204,40205,
40206,40463,40494,40497,40503,40505,40734,40735,40737,40739,40742,40747,40830,41051,41219,
41243,41245,41246,41249,41266,41267,41350,41363,41367,41370,42008,42010,42011,42147,42150,
42152,42155,42172,42173,42177,42178,42351,42448,42450,42452,42456,42542,42688,42911,42913,
42914,42917,43170,43207,43437,43438,43439,43692,43718,43724,43774,43778,43779,43780,43916,
43996,44207,44302,44365,44372,44690,44790,45313,45372,46589,49001,49003,49650,49652,49794,
50681,50942,52893,52894,52966,53473,53558,55042,55351,55460,55617,55901,55903,56586,56937,
58071,58072,58289,58617,60250,61091,61630,61889,61891,64248,65036,66917,66920,68841,68842,
71737,71754,72110,72600,72603,72833,73021,73099,73105,73150,73225,73556,73562,73806,73826,
73909,74178,74597,74696,74698,75600,75605,75736,75898,75934,76350,83147,85099,100556,103495,
103665,104285
END_

! ----------------------------------------------------------------
!
! Design Response: Stiffness_Measure
!
DRESP
  ID_NAME = Stiffness_Measure
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = ENERGY_STIFF_MEASURE
  GROUP_OPER = SUM
  LC_SEL = SUM 
  LC_SET = STATIC, ALL, ALL, MAX
END_

! ----------------------------------------------------------------
!
! Design Response: Mass_DResp_1
!
DRESP
  ID_NAME = Mass_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = WEIGHT
  GROUP_OPER = SUM
END_

! ----------------------------------------------------------------
!
!
! Design Area: Task1_DESIGN_AREA
!
DV_TOPO
  ID_NAME = Task1_DESIGN_AREA
  EL_GROUP = ALL_ELEMENTS
END_

! ----------------------------------------------------------------
!
! Objective Function: StiffnessEnergy_Obj_Func
!
OBJ_FUNC
  ID_NAME = StiffnessEnergy_Obj_Func
  DRESP = Stiffness_Measure, 1.0
  TARGET = MIN
END_

! ----------------------------------------------------------------
!
! Constraint: Mass_Constraint_1
!
CONSTRAINT
  ID_NAME = Mass_Constraint_1
  DRESP = Mass_DResp_1
  MAGNITUDE = REL
  LE_VALUE = 0.7
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Frozen_ManufacConstraint_2
!
DVCON_TOPO
  ID_NAME = Frozen_ManufacConstraint_2
  EL_GROUP = FROZEN_AREA_ELEMS_GRP_1
  CHECK_TYPE = FROZEN
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Thickness_ManufacConstraint_3
!
DVCON_TOPO
  ID_NAME = Thickness_ManufacConstraint_3
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = MIN_MEMBER
  THICKNESS = 0.00393164
END_

! ----------------------------------------------------------------
!
! CS_DEF: Datum_CSys_5
!
CS_DEF
  ID_NAME = Datum_CSys_5
  CS_TYPE = RECTANGULAR
  DEF_TYPE = LOCAL
  CS_REF = CS_0
  ORIGIN_123 = 0.046727, 0.000000, 0.000000
  ROTATION_321 = 0.000000, 90.000000, -0.000000
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Symm_ManufacConstraint_4-1
!
LINK_TOPO
  ID_NAME = Symm_ManufacConstraint_4-1_LINK_
  TYPE = PLANE_SYM, AXIS_3
  CS = Datum_CSys_5 
  IGNORE_FROZEN = FALSE
END_

DVCON_TOPO
  ID_NAME = Symm_ManufacConstraint_4-1
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = LINK_TOPO
  CHECK_LINK = Symm_ManufacConstraint_4-1_LINK_
END_

! ----------------------------------------------------------------
!
!
! Optimize: OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_CONTROLLER 
!
OPTIMIZE
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV = Task1_DESIGN_AREA
  OBJ_FUNC = StiffnessEnergy_Obj_Func
  DVCON = Frozen_ManufacConstraint_2
  DVCON = Thickness_ManufacConstraint_3
  DVCON = Symm_ManufacConstraint_4-1
  CONSTRAINT = Mass_Constraint_1
  STRATEGY = TOPO_SENSITIVITY
END_

OPT_PARAM
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY_OPT_PARAM_
  OPTIMIZE = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV_UPDATE_STRATEGY = CSA
  STABILIZATION = YES
  AUTO_FROZEN = BOTH
  AUTO_FROZEN_CON = BOTH
  STOP_CRITERION_LEVEL = BOTH
  STOP_CRITERION_OBJ = 0.001
  STOP_CRITERION_DENSITY = 0.005
END_

STOP
  ID_NAME = Task-1_GLOBAL_STOP_CONDITION_
  ITER_MAX = 75
END_

